<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Renungan Embun Pagi</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&display=swap" rel="stylesheet">
    
    <style>
        .glass-panel { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); }
        .nav-item.active { color: #ea580c; border-bottom: 2px solid #ea580c; }
        .loading-spinner { border: 3px solid #f3f3f3; border-top: 3px solid #ea580c; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        .verse-card {
            background: linear-gradient(135deg, #1e3a8a 0%, #3730a3 50%, #581c87 100%);
            position: relative;
            overflow: hidden;
        }
        .verse-card::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: pulse 4s ease-in-out infinite;
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.5; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }
        .verse-text {
            font-family: 'Playfair Display', serif;
            line-height: 1.6;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        .verse-reference {
            font-family: 'Inter', sans-serif;
            letter-spacing: 0.05em;
        }
        .reflection-box {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-left: 4px solid #fbbf24;
        }
        .date-badge-verse {
            background: rgba(251, 191, 36, 0.2);
            color: #fbbf24;
            border: 1px solid rgba(251, 191, 36, 0.3);
        }
        .action-btn {
            transition: all 0.3s ease;
        }
        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        
        /* VIDEO THUMBNAIL STYLES */
        .video-thumb {
            position: relative;
            width: 100%;
            padding-bottom: 56.25%;
            background-size: cover;
            background-position: center;
            cursor: pointer;
            border-radius: 0.75rem;
            overflow: hidden;
        }
        .video-thumb::after {
            content: '\f144';
            font-family: 'Font Awesome 6 Free';
            font-weight: 400;
            font-size: 4rem;
            color: white;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            opacity: 0.9;
            transition: all 0.3s;
            text-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }
        .video-thumb:hover::after {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1.1);
            color: #ff0000;
        }
        .video-thumb::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.2);
            transition: all 0.3s;
        }
        .video-thumb:hover::before {
            background: rgba(0,0,0,0.4);
        }
        
        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.2s;
        }
        .calendar-day:hover {
            background-color: #fed7aa;
        }
        .calendar-day.active {
            background-color: #ea580c;
            color: white;
        }
        .calendar-day.other-month {
            color: #cbd5e1;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-orange-50 via-white to-blue-50 min-h-screen text-slate-800 font-sans">

    <!-- Navigation -->
    <nav class="fixed top-0 w-full z-50 glass-panel shadow-sm">
        <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-2">
                    <i class="fas fa-sun text-orange-600 text-2xl"></i>
                    <span class="font-serif font-bold text-xl text-slate-900 tracking-tight">Embun<span class="text-orange-600">Pagi</span></span>
                </div>
                <div class="hidden md:flex space-x-6 text-sm font-medium text-slate-600">
                    <button onclick="switchTab('devotional')" id="nav-devotional" class="nav-item active hover:text-orange-600 transition-colors py-5">Renungan</button>
                    <button onclick="switchTab('verse')" id="nav-verse" class="nav-item hover:text-orange-600 transition-colors py-5">Ayat Hari Ini</button>
                    <button onclick="switchTab('worship')" id="nav-worship" class="nav-item hover:text-orange-600 transition-colors py-5">Lagu Rohani</button>
                    <button onclick="switchTab('prayer-support')" id="nav-prayer-support" class="nav-item hover:text-orange-600 transition-colors py-5 flex items-center gap-1">
                        <i class="fas fa-hands-praying text-xs"></i> Dukungan Doa
                    </button>
                </div>
                <div class="md:hidden flex items-center">
                    <button onclick="toggleMobileMenu()" class="text-slate-600 hover:text-orange-600">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
        </div>
        <div id="mobile-menu" class="hidden md:hidden bg-white border-t border-gray-100 absolute w-full">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <button onclick="switchTab('devotional')" class="block w-full text-left px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-orange-600 hover:bg-orange-50">Renungan</button>
                <button onclick="switchTab('verse')" class="block w-full text-left px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-orange-600 hover:bg-orange-50">Ayat Hari Ini</button>
                <button onclick="switchTab('worship')" class="block w-full text-left px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-orange-600 hover:bg-orange-50">Lagu Rohani</button>
                <button onclick="switchTab('prayer-support')" class="block w-full text-left px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-orange-600 hover:bg-orange-50">Dukungan Doa</button>
            </div>
        </div>
    </nav>

    <main class="pt-24 pb-12 px-4 sm:px-6 max-w-5xl mx-auto min-h-screen">
        
        <!-- SECTION: RENUNGAN HARIAN -->
        <div id="section-devotional">
            <div class="text-center mb-10">
                <span class="inline-block py-1 px-3 rounded-full bg-orange-100 text-orange-700 text-xs font-bold uppercase mb-3" id="current-date-display">Memuat...</span>
                <h1 class="font-serif text-4xl md:text-5xl font-bold text-slate-900 mb-4">
                    Renungan untuk <span class="text-orange-600">Hari Ini</span>
                </h1>
            </div>

            <div id="devotional-loading" class="bg-white rounded-2xl shadow-xl p-8 mb-8">
                <div class="flex flex-col items-center justify-center py-8">
                    <div class="loading-spinner mb-4"></div>
                    <p class="text-slate-500">Menghubungkan ke server...</p>
                </div>
            </div>

            <div id="devotional-content" class="hidden bg-white rounded-2xl shadow-xl overflow-hidden border border-slate-100 mb-8">
                <div class="h-2 bg-gradient-to-r from-orange-400 to-orange-600"></div>
                <div class="p-8 md:p-12">
                    <div class="flex flex-col md:flex-row gap-8">
                        <div class="md:w-1/3 flex flex-col justify-center border-b md:border-b-0 md:border-r border-slate-100 pb-8 md:pb-0 md:pr-8">
                            <i class="fas fa-quote-left text-4xl text-orange-200 mb-4"></i>
                            <h3 class="font-serif text-2xl font-bold text-slate-900 mb-2" id="devo-verse-ref">Memuat...</h3>
                            <p class="font-serif text-xl text-slate-700 italic leading-relaxed" id="devo-verse-text">"..."</p>
                            <button onclick="copyVerse()" class="mt-6 text-sm text-orange-600 hover:text-orange-800 font-medium flex items-center gap-2 self-start">
                                <i class="far fa-copy"></i> Salin Ayat
                            </button>
                        </div>
                        
                        <div class="md:w-2/3">
                            <h2 class="text-2xl font-bold text-slate-900 mb-4" id="devo-title">Memuat...</h2>
                            <div class="prose prose-slate prose-lg text-slate-600" id="devo-body">
                                <p>Memuat renungan...</p>
                            </div>
                            
                            <div class="mt-8 pt-6 border-t border-slate-100 flex items-center justify-between">
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 rounded-full bg-orange-100 flex items-center justify-center text-orange-600">
                                        <i class="fas fa-pen-nib"></i>
                                    </div>
                                    <div>
                                        <p class="text-sm font-bold text-slate-900">Penulis</p>
                                        <p class="text-xs text-slate-500" id="devo-author">Renungan Harian®</p>
                                    </div>
                                </div>
                                <div class="flex gap-2">
                                    <button onclick="shareDevotional()" class="p-2 rounded-full hover:bg-slate-100 text-slate-500 transition-colors">
                                        <i class="fas fa-share-alt"></i>
                                    </button>
                                    <button onclick="toggleLike(this)" class="p-2 rounded-full hover:bg-red-50 text-slate-500 hover:text-red-500 transition-colors">
                                        <i class="far fa-heart"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="devotional-error" class="hidden bg-red-50 border border-red-200 rounded-2xl p-8 text-center">
                <i class="fas fa-exclamation-circle text-4xl text-red-400 mb-4"></i>
                <h3 class="text-lg font-bold text-red-800 mb-2">Gagal Memuat</h3>
                <div class="flex gap-3 justify-center">
                    <button onclick="retryFetch()" class="px-6 py-2 bg-orange-600 text-white rounded-lg font-medium">
                        <i class="fas fa-sync-alt"></i> Coba Lagi
                    </button>
                    <button onclick="loadFallbackDevotional()" class="px-6 py-2 bg-white border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50">
                        Offline Mode
                    </button>
                </div>
            </div>
        </div>

        <!-- SECTION: AYAT HARI INI -->
        <div id="section-verse" class="hidden">
            <div class="text-center mb-8">
                <span class="inline-block py-1 px-3 rounded-full bg-indigo-100 text-indigo-700 text-xs font-bold uppercase mb-3">
                    <i class="fas fa-bible mr-1"></i> Ayat Pilihan
                </span>
                <h1 class="font-serif text-4xl md:text-5xl font-bold text-slate-900 mb-2">
                    Ayat <span class="text-orange-600">Hari Ini</span>
                </h1>
                <p class="text-slate-500" id="verse-date-display">Memuat tanggal...</p>
            </div>

            <div class="verse-card rounded-3xl p-8 md:p-12 text-white shadow-2xl mb-8 relative">
                <div class="relative z-10 max-w-3xl mx-auto text-center">
                    <div class="mb-6">
                        <span class="date-badge-verse px-4 py-2 rounded-full text-sm font-medium inline-flex items-center gap-2">
                            <i class="fas fa-calendar-day"></i>
                            <span id="verse-day-info">Hari ke-1 dari 365</span>
                        </span>
                    </div>

                    <div class="mb-6">
                        <i class="fas fa-bible text-6xl text-yellow-300/80"></i>
                    </div>

                    <blockquote class="mb-8">
                        <p class="verse-text text-2xl md:text-4xl font-semibold mb-6 leading-relaxed" id="daily-verse-text">
                            "Sebab Aku ini mengetahui rancangan-rancangan apa yang ada pada-Ku mengenai kamu, demikianlah firman TUHAN, yaitu rancangan damai sejahtera dan bukan rancangan kecelakaan, untuk memberikan kepadamu hari depan yang penuh harapan."
                        </p>
                        <footer class="verse-reference">
                            <cite class="text-lg md:text-xl font-bold text-yellow-300 not-italic" id="daily-verse-ref">
                                Yeremia 29:11
                            </cite>
                        </footer>
                    </blockquote>

                    <div class="flex flex-wrap justify-center gap-4 mb-8">
                        <button onclick="copyDailyVerse()" class="action-btn bg-white/20 hover:bg-white/30 backdrop-blur-sm px-6 py-3 rounded-full font-medium flex items-center gap-2">
                            <i class="fas fa-copy"></i>
                            <span>Salin Ayat</span>
                        </button>
                        <button onclick="shareDailyVerse()" class="action-btn bg-white/20 hover:bg-white/30 backdrop-blur-sm px-6 py-3 rounded-full font-medium flex items-center gap-2">
                            <i class="fas fa-share-alt"></i>
                            <span>Bagikan</span>
                        </button>
                        <button onclick="readFullChapter()" class="action-btn bg-yellow-500 hover:bg-yellow-400 text-slate-900 px-6 py-3 rounded-full font-medium flex items-center gap-2">
                            <i class="fas fa-book-open"></i>
                            <span>Baca Pasal Lengkap</span>
                        </button>
                    </div>

                    <div class="reflection-box rounded-2xl p-6 text-left">
                        <h3 class="font-bold text-lg mb-3 flex items-center gap-2">
                            <i class="fas fa-lightbulb text-yellow-400"></i>
                            <span>Renungan Singkat</span>
                        </h3>
                        <p class="text-white/90 leading-relaxed" id="daily-verse-reflection">
                            Tuhan memiliki rencana yang indah untuk hidupmu. Meskipun saat ini mungkin kamu menghadapi kesulitan, percayalah bahwa Tuhan sedang mempersiapkan masa depan yang penuh harapan bagimu. Jangan menyerah, terus percaya pada rencana-Nya.
                        </p>
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <button onclick="changeVerse(-1)" class="bg-white rounded-2xl p-6 shadow-md border border-slate-100 hover:shadow-lg transition-all text-left group">
                    <div class="flex items-center gap-3 text-slate-400 mb-2 group-hover:text-orange-600">
                        <i class="fas fa-chevron-left"></i>
                        <span class="text-sm font-medium">Kemarin</span>
                    </div>
                    <p class="text-slate-600 text-sm line-clamp-2" id="prev-verse-preview">Mazmur 23:1 - "TUHAN adalah gembalaku..."</p>
                </button>

                <div class="bg-gradient-to-br from-orange-500 to-orange-600 rounded-2xl p-6 shadow-md text-white text-center">
                    <i class="fas fa-compass text-3xl mb-2"></i>
                    <p class="text-sm font-medium opacity-90">Tema Hari Ini</p>
                    <p class="font-bold text-lg" id="daily-theme">Pengharapan</p>
                </div>

                <button onclick="changeVerse(1)" class="bg-white rounded-2xl p-6 shadow-md border border-slate-100 hover:shadow-lg transition-all text-right group">
                    <div class="flex items-center justify-end gap-3 text-slate-400 mb-2 group-hover:text-orange-600">
                        <span class="text-sm font-medium">Besok</span>
                        <i class="fas fa-chevron-right"></i>
                    </div>
                    <p class="text-slate-600 text-sm line-clamp-2" id="next-verse-preview">Filipi 4:13 - "Segala perkara dapat..."</p>
                </button>
            </div>

            <div class="mt-8 bg-white rounded-2xl p-6 shadow-md border border-slate-100">
                <h3 class="font-bold text-slate-900 mb-4 flex items-center gap-2">
                    <i class="fas fa-calendar-alt text-orange-600"></i>
                    <span>Jadwal Ayat Bulan Ini</span>
                </h3>
                <div class="grid grid-cols-7 gap-2 text-center text-sm mb-2 font-bold text-slate-400">
                    <div>Min</div><div>Sen</div><div>Sel</div><div>Rab</div><div>Kam</div><div>Jum</div><div>Sab</div>
                </div>
                <div class="grid grid-cols-7 gap-2 text-center text-sm" id="monthly-verse-calendar">
                </div>
            </div>
        </div>

        <!-- SECTION: LAGU ROHANI - Menggunakan thumbnail yang bisa diklik -->
        <div id="section-worship" class="hidden">
            <div class="text-center mb-10">
                <span class="inline-block py-1 px-3 rounded-full bg-blue-100 text-blue-700 text-xs font-bold uppercase mb-3">Koleksi Lagu Rohani</span>
                <h1 class="font-serif text-4xl font-bold text-slate-900 mb-4">Lagu Rohani <span class="text-orange-600">Pilihan</span></h1>
                <p class="text-slate-500">Klik thumbnail untuk menonton video di YouTube</p>
            </div>

            <div id="worship-grid" class="grid grid-cols-1 lg:grid-cols-2 gap-8"></div>

            <div class="mt-8 text-center">
                <button onclick="rotateWorshipSongs()" class="px-8 py-3 bg-orange-600 text-white rounded-full font-medium hover:bg-orange-700 transition-all shadow-lg">
                    <i class="fas fa-sync-alt mr-2"></i> Ganti Lagu
                </button>
            </div>
        </div>

        <!-- SECTION: DUKUNGAN DOA -->
        <div id="section-prayer-support" class="hidden">
            <div class="text-center mb-10">
                <span class="inline-block py-1 px-3 rounded-full bg-green-100 text-green-700 text-xs font-bold uppercase mb-3">Komunitas Doa</span>
                <h1 class="font-serif text-4xl font-bold text-slate-900 mb-4">Dukungan <span class="text-orange-600">Doa</span></h1>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div class="bg-white rounded-2xl shadow-xl p-8 border border-slate-100">
                    <div class="flex items-center gap-3 mb-6">
                        <div class="w-10 h-10 rounded-full bg-orange-100 flex items-center justify-center text-orange-600">
                            <i class="fas fa-paper-plane"></i>
                        </div>
                        <h2 class="font-serif text-2xl font-bold text-slate-900">Kirim Permohonan Doa</h2>
                    </div>

                    <form id="prayer-form" class="space-y-4" onsubmit="submitPrayer(event)">
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-1">Nama Lengkap *</label>
                            <input type="text" id="prayer-name" required class="w-full px-4 py-3 rounded-lg border border-slate-200 focus:border-orange-500 focus:ring-2 focus:ring-orange-200 outline-none transition-all" placeholder="Masukkan nama Anda">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-1">Email/WhatsApp</label>
                            <input type="text" id="prayer-contact" class="w-full px-4 py-3 rounded-lg border border-slate-200 focus:border-orange-500 focus:ring-2 focus:ring-orange-200 outline-none transition-all" placeholder="Untuk follow-up (opsional)">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-1">Kategori *</label>
                            <select id="prayer-category" required class="w-full px-4 py-3 rounded-lg border border-slate-200 focus:border-orange-500 focus:ring-2 focus:ring-orange-200 outline-none transition-all">
                                <option value="Umum">Umum</option>
                                <option value="Kesembuhan">Kesembuhan</option>
                                <option value="Pekerjaan & Keuangan">Pekerjaan & Keuangan</option>
                                <option value="Keluarga & Pernikahan">Keluarga & Pernikahan</option>
                                <option value="Pendidikan">Pendidikan</option>
                                <option value="Lainnya">Lainnya</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-1">Permohonan Doa *</label>
                            <textarea id="prayer-request" required rows="5" class="w-full px-4 py-3 rounded-lg border border-slate-200 focus:border-orange-500 focus:ring-2 focus:ring-orange-200 outline-none transition-all resize-none" placeholder="Tuliskan permohonan doa Anda di sini..."></textarea>
                        </div>

                        <button type="submit" id="submit-prayer-btn" class="w-full py-3 bg-green-600 hover:bg-green-700 text-white font-bold rounded-lg transition-all transform hover:scale-[1.02] flex items-center justify-center gap-2">
                            <i class="fab fa-whatsapp"></i>
                            <span>Kirim via WhatsApp</span>
                        </button>

                        <div class="bg-green-50 border border-green-200 rounded-lg p-3 mt-4">
                            <p class="text-xs text-green-800 text-center">
                                <i class="fas fa-info-circle mr-1"></i>
                                Permohonan doa akan langsung terkirim ke WhatsApp: <strong>0812-2504-7599</strong>
                            </p>
                        </div>
                    </form>

                    <div id="prayer-success" class="hidden text-center py-8">
                        <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center text-green-600 mx-auto mb-4">
                            <i class="fab fa-whatsapp text-2xl"></i>
                        </div>
                        <h3 class="font-bold text-xl text-slate-900 mb-2">WhatsApp Dibuka!</h3>
                        <p class="text-slate-600 mb-4">Silakan kirim permohonan doa Anda melalui WhatsApp. Tim doa kami akan segera mendoakan.</p>
                        <button onclick="resetPrayerForm()" class="text-orange-600 hover:text-orange-800 font-medium">Kirim permohonan lain</button>
                    </div>
                </div>

                <div class="space-y-6">
                    <div class="bg-gradient-to-br from-orange-500 to-orange-700 rounded-2xl p-8 text-white shadow-xl">
                        <i class="fas fa-hands-praying text-4xl mb-4 opacity-80"></i>
                        <h3 class="font-serif text-2xl font-bold mb-3">"Berdoalah tanpa henti"</h3>
                        <p class="text-orange-100 mb-4">1 Tesalonika 5:17</p>
                    </div>
                    <div class="bg-blue-50 rounded-2xl p-6 border border-blue-100">
                        <h4 class="font-bold text-blue-900 mb-2 flex items-center gap-2">
                            <i class="fas fa-shield-alt text-blue-500"></i> Kerahasiaan Terjamin
                        </h4>
                        <p class="text-blue-800 text-sm">Setiap permohonan dijaga kerahasiaannya dan hanya dibagikan kepada tim doa yang terpercaya.</p>
                    </div>
                    <div class="bg-green-50 rounded-2xl p-6 border border-green-100">
                        <h4 class="font-bold text-green-900 mb-2 flex items-center gap-2">
                            <i class="fab fa-whatsapp text-green-500"></i> Respon Cepat
                        </h4>
                        <p class="text-green-800 text-sm">Tim doa kami akan merespon permohonan Anda dalam waktu 24 jam.</p>
                    </div>
                </div>
            </div>
        </div>

    </main>

    <footer class="bg-slate-900 text-white py-12 mt-auto">
        <div class="max-w-5xl mx-auto px-4 text-center">
            <p>&copy; 2026 - Renungan Embun Pagi. All rights reserved.</p>
            <p class="mt-2 text-xs text-slate-400">Sumber: Renungan Harian® | Alkitab (TB) | YouTube</p>
        </div>
    </footer>

    <div id="toast" class="fixed bottom-5 right-5 transform translate-y-20 opacity-0 transition-all duration-300 z-50 bg-slate-800 text-white px-6 py-3 rounded-lg shadow-lg flex items-center gap-3">
        <i class="fas fa-check-circle text-green-400"></i>
        <span id="toast-message">Notification</span>
    </div>

    <script>
        // DATABASE AYAT ALKITAB
        const bibleVersesDB = [
            { day: 1, ref: "Yeremia 29:11", text: "Sebab Aku ini mengetahui rancangan-rancangan apa yang ada pada-Ku mengenai kamu, demikianlah firman TUHAN, yaitu rancangan damai sejahtera dan bukan rancangan kecelakaan, untuk memberikan kepadamu hari depan yang penuh harapan.", theme: "Pengharapan", reflection: "Tuhan memiliki rencana indah untuk hidupmu. Meski saat ini sulit, percayalah masa depanmu penuh harapan." },
            { day: 2, ref: "Mazmur 23:1", text: "TUHAN adalah gembalaku, takkan kekurangan aku.", theme: "Kecukupan", reflection: "Dalam Tuhan, kita punya segala yang kita butuhkan. Percayalah pada penyediaan-Nya." },
            { day: 3, ref: "Filipi 4:13", text: "Segala perkara dapat kutanggung di dalam Dia yang memberi kekuatan kepadaku.", theme: "Kekuatan", reflection: "Kamu lebih kuat dari yang kamu kira, karena Tuhan memberi kekuatan." },
            { day: 4, ref: "Yesaya 41:10", text: "Janganlah takut, sebab Aku menyertai engkau; janganlah bimbang, sebab Aku ini Allahmu; Aku akan meneguhkan, bahkan akan menolong engkau; Aku akan memegang engkau dengan tangan kanan-Ku yang membawa kemenangan.", theme: "Keberanian", reflection: "Tuhan selalu menyertaimu. Jangan takut menghadapi hari ini." },
            { day: 5, ref: "1 Korintus 13:4-5", text: "Kasih itu sabar; kasih itu murah hati; ia tidak cemburu. Ia tidak memegahkan diri dan tidak sombong. Ia tidak melakukan yang tidak sopan dan tidak mencari keuntungan sendiri.", theme: "Kasih", reflection: "Cintailah orang lain dengan tulus, tanpa pamrih dan kesombongan." },
            { day: 6, ref: "Amsal 3:5-6", text: "Percayalah kepada TUHAN dengan segenap hatimu, dan janganlah bersandar kepada pengertianmu sendiri. Akuilah Dia dalam segala lakumu, maka Ia akan meluruskan jalanmu.", theme: "Kepercayaan", reflection: "Serahkan rencanamu kepada Tuhan. Dia akan menunjukkan jalan yang terbaik." },
            { day: 7, ref: "Yesaya 40:31", text: "Tetapi orang-orang yang menanti-nantikan TUHAN akan mendapat kekuatan baru: mereka akan naik sayapnya seperti elang; mereka akan berlari dan tidak menjadi lesu, mereka akan berjalan dan tidak menjadi lelah.", theme: "Kekuatan Baru", reflection: "Tunggulah Tuhan. Dia akan memberikan kekuatan baru bagimu." },
            { day: 8, ref: "Roma 8:28", text: "Kita tahu sekarang, bahwa Allah turut bekerja dalam segala sesuatu untuk mendatangkan kebaikan bagi mereka yang mengasihi Dia.", theme: "Kebaikan Tuhan", reflection: "Semua yang terjadi akan diubah Tuhan menjadi kebaikan. Percayalah!" },
            { day: 9, ref: "Matius 11:28", text: "Marilah kepada-Ku, semua yang letih lesu dan berbeban berat, Aku akan memberi kelegaan kepadamu.", theme: "Kelegaan", reflection: "Bawa bebanmu kepada Tuhan. Dia memberikan ketenangan dan kedamaian." },
            { day: 10, ref: "Yohanes 3:16", text: "Karena begitu besar kasih Allah akan dunia ini, sehingga Ia telah mengaruniakan Anak-Nya yang tunggal, supaya setiap orang yang percaya kepada-Nya tidak binasa, melainkan beroleh hidup yang kekal.", theme: "Kasih Allah", reflection: "Allah mengasihimu dengan kasih yang tak terbatas. Anak-Nya menjadi pengorbanan untukmu." }
        ];

        // LAGU ROHANI DATABASE - Menggunakan ID video dan thumbnail
        const worshipSongs = [
            { title: "10.000 Reasons (Bless the Lord)", artist: "Matt Redman", id: "DXDGE_lRI0E", category: "Pujian" },
            { title: "What A Beautiful Name", artist: "Hillsong Worship", id: "nQWFzMvCfLE", category: "Pujian" },
            { title: "Goodness of God", artist: "Bethel Music", id: "n0FBb6hnwTo", category: "Pujian" },
            { title: "Way Maker", artist: "Sinach", id: "HgrXU5tphZs", category: "Pujian" },
            { title: "Tak Terbatas", artist: "JPCC Worship", id: "4bH6j8y7CE0", category: "Pujian Indonesia" },
            { title: "Ku Mau Cinta Yesus", artist: "Sari Simorangkir", id: "8X5a-0l1C0c", category: "Pujian Indonesia" },
            { title: "Kemenangan Terjadi Di Sini", artist: "JPCC Worship", id: "3RjX8k1-5Yw", category: "Pujian Indonesia" },
            { title: "Roh-Mu Yang Hidup", artist: "Symphony Worship", id: "5QJ9QZ8vXxQ", category: "Pujian Indonesia" }
        ];

        let currentVerseIndex = 0;
        let currentWorshipIndex = 0;

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            updateDateDisplay();
            loadDevotional();
            initVerseSection();
            loadWorshipSongs();
        });

        function updateDateDisplay() {
            const now = new Date();
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            const dateStr = now.toLocaleDateString('id-ID', options);
            document.getElementById('current-date-display').textContent = dateStr;
            document.getElementById('verse-date-display').textContent = dateStr;
        }

        function switchTab(tabName) {
            document.getElementById('section-devotional').classList.add('hidden');
            document.getElementById('section-verse').classList.add('hidden');
            document.getElementById('section-worship').classList.add('hidden');
            document.getElementById('section-prayer-support').classList.add('hidden');
            
            document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
            
            document.getElementById('section-' + tabName).classList.remove('hidden');
            document.getElementById('nav-' + tabName).classList.add('active');
            
            document.getElementById('mobile-menu').classList.add('hidden');
            window.scrollTo(0, 0);
        }

        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            menu.classList.toggle('hidden');
        }

        // RENUNGAN FUNCTIONS
        async function loadDevotional() {
            const loadingEl = document.getElementById('devotional-loading');
            const contentEl = document.getElementById('devotional-content');
            const errorEl = document.getElementById('devotional-error');
            
            try {
                await new Promise(resolve => setTimeout(resolve, 1500));
                
                const data = {
                    title: "Kuatkan Hatimu di Dalam Tuhan",
                    verseRef: "Yosua 1:9",
                    verseText: "Bukankah telah kuperintahkan kepadamu: kuatkan dan teguhkanlah hatimu? Janganlah takut dan janganlah patah hati, sebab TUHAN, Allahmu, menyertai engkau, ke manapun engkau pergi.",
                    body: `
                        <p class="mb-4">Di tengah situasi dunia yang penuh ketidakpastian, Tuhan memanggil kita untuk kuat dan teguh. Bukan dengan kekuatan kita sendiri, tetapi karena Dia menyertai kita.</p>
                        <p class="mb-4">Ketika Yosua dipanggil untuk memimpin bangsa Israel menggantikan Musa, dia pasti merasa takut dan tidak mampu. Tapi Tuhan berkali-kali menegaskan: "Kuatkan dan teguhkanlah hatimu!"</p>
                        <p class="mb-4">Kata "menyertai" dalam bahasa Ibrani adalah "yada" yang berarti Tuhan hadir secara aktif dalam setiap aspek hidup kita. Dia tidak hanya melihat dari jauh, tetapi Dia berjalan bersama kita.</p>
                        <p class="font-semibold text-slate-800 mt-6">Renungan Hari Ini:</p>
                        <p>Apa yang membuatmu takut hari ini? Kehilangan pekerjaan? Masalah kesehatan? Hubungan yang retak? Ingatlah, Tuhan menyertai ke manapun engkau pergi. Jangan takut, karena Dia memegang tanganmu.</p>
                    `,
                    author: "Renungan Harian®"
                };
                
                document.getElementById('devo-title').textContent = data.title;
                document.getElementById('devo-verse-ref').textContent = data.verseRef;
                document.getElementById('devo-verse-text').textContent = `"${data.verseText}"`;
                document.getElementById('devo-body').innerHTML = data.body;
                document.getElementById('devo-author').textContent = data.author;
                
                loadingEl.classList.add('hidden');
                contentEl.classList.remove('hidden');
                
            } catch (error) {
                loadingEl.classList.add('hidden');
                errorEl.classList.remove('hidden');
            }
        }

        function retryFetch() {
            document.getElementById('devotional-error').classList.add('hidden');
            document.getElementById('devotional-loading').classList.remove('hidden');
            loadDevotional();
        }

        function loadFallbackDevotional() {
            document.getElementById('devotional-error').classList.add('hidden');
            document.getElementById('devotional-loading').classList.add('hidden');
            document.getElementById('devotional-content').classList.remove('hidden');
        }

        function copyVerse() {
            const verse = document.getElementById('devo-verse-text').textContent;
            navigator.clipboard.writeText(verse).then(() => {
                showToast('Ayat berhasil disalin!');
            });
        }

        function shareDevotional() {
            if (navigator.share) {
                navigator.share({
                    title: 'Renungan Embun Pagi',
                    text: document.getElementById('devo-title').textContent,
                    url: window.location.href
                });
            } else {
                showToast('Fitur share tidak tersedia di browser ini');
            }
        }

        function toggleLike(btn) {
            const icon = btn.querySelector('i');
            if (icon.classList.contains('far')) {
                icon.classList.remove('far');
                icon.classList.add('fas', 'text-red-500');
                showToast('Ditambahkan ke favorit');
            } else {
                icon.classList.remove('fas', 'text-red-500');
                icon.classList.add('far');
            }
        }

        // AYAT HARI INI FUNCTIONS
        function initVerseSection() {
            const now = new Date();
            const startOfYear = new Date(now.getFullYear(), 0, 0);
            const diff = now - startOfYear;
            const oneDay = 1000 * 60 * 60 * 24;
            currentVerseIndex = Math.floor(diff / oneDay) % bibleVersesDB.length;
            
            displayVerse(currentVerseIndex);
            generateCalendar();
        }

        function displayVerse(index) {
            const verse = bibleVersesDB[index];
            document.getElementById('daily-verse-text').textContent = `"${verse.text}"`;
            document.getElementById('daily-verse-ref').textContent = verse.ref;
            document.getElementById('daily-verse-reflection').textContent = verse.reflection;
            document.getElementById('daily-theme').textContent = verse.theme;
            document.getElementById('verse-day-info').textContent = `Hari ke-${verse.day} dari 365`;
            
            const prevIndex = (index - 1 + bibleVersesDB.length) % bibleVersesDB.length;
            const nextIndex = (index + 1) % bibleVersesDB.length;
            
            document.getElementById('prev-verse-preview').textContent = 
                `${bibleVersesDB[prevIndex].ref} - "${bibleVersesDB[prevIndex].text.substring(0, 30)}..."`;
            document.getElementById('next-verse-preview').textContent = 
                `${bibleVersesDB[nextIndex].ref} - "${bibleVersesDB[nextIndex].text.substring(0, 30)}..."`;
        }

        function changeVerse(direction) {
            currentVerseIndex = (currentVerseIndex + direction + bibleVersesDB.length) % bibleVersesDB.length;
            displayVerse(currentVerseIndex);
            
            document.querySelectorAll('.calendar-day').forEach((day, idx) => {
                day.classList.toggle('active', idx === currentVerseIndex);
            });
        }

        function copyDailyVerse() {
            const text = document.getElementById('daily-verse-text').textContent + ' - ' + 
                        document.getElementById('daily-verse-ref').textContent;
            navigator.clipboard.writeText(text).then(() => {
                showToast('Ayat berhasil disalin!');
            });
        }

        function shareDailyVerse() {
            const text = document.getElementById('daily-verse-text').textContent;
            const ref = document.getElementById('daily-verse-ref').textContent;
            
            if (navigator.share) {
                navigator.share({
                    title: 'Ayat Hari Ini',
                    text: `${text} - ${ref}`,
                    url: window.location.href
                });
            } else {
                showToast('Fitur share tidak tersedia');
            }
        }

        function readFullChapter() {
            const ref = bibleVersesDB[currentVerseIndex].ref;
            const book = ref.split(' ')[0];
            window.open(`https://www.bible.com/bible/306/${book}.1.TB`, '_blank');
        }

        function generateCalendar() {
            const calendar = document.getElementById('monthly-verse-calendar');
            const now = new Date();
            const daysInMonth = new Date(now.getFullYear(), now.getMonth() + 1, 0).getDate();
            const firstDay = new Date(now.getFullYear(), now.getMonth(), 1).getDay();
            
            calendar.innerHTML = '';
            
            for (let i = 0; i < firstDay; i++) {
                const emptyDay = document.createElement('div');
                emptyDay.className = 'calendar-day other-month';
                calendar.appendChild(emptyDay);
            }
            
            for (let i = 1; i <= daysInMonth; i++) {
                const dayEl = document.createElement('div');
                dayEl.className = 'calendar-day';
                dayEl.textContent = i;
                
                const dayIndex = (currentVerseIndex - now.getDate() + i + bibleVersesDB.length) % bibleVersesDB.length;
                
                if (i === now.getDate()) {
                    dayEl.classList.add('active');
                }
                
                dayEl.onclick = () => {
                    currentVerseIndex = dayIndex;
                    displayVerse(currentVerseIndex);
                    document.querySelectorAll('.calendar-day').forEach(d => d.classList.remove('active'));
                    dayEl.classList.add('active');
                };
                
                calendar.appendChild(dayEl);
            }
        }

        // LAGU ROHANI FUNCTIONS - Menggunakan thumbnail YouTube yang bisa diklik
        function loadWorshipSongs() {
            const grid = document.getElementById('worship-grid');
            grid.innerHTML = '';
            
            const displaySongs = worshipSongs.slice(currentWorshipIndex, currentWorshipIndex + 4);
            
            displaySongs.forEach(song => {
                const card = document.createElement('div');
                card.className = 'bg-white rounded-2xl shadow-lg overflow-hidden border border-slate-100 hover:shadow-xl transition-shadow';
                
                // Gunakan thumbnail YouTube dengan klik untuk buka video
                const thumbnailUrl = `https://img.youtube.com/vi/${song.id}/maxresdefault.jpg`;
                const videoUrl = `https://www.youtube.com/watch?v=${song.id}`;
                
                card.innerHTML = `
                    <div class="video-thumb" 
                         style="background-image: url('${thumbnailUrl}')" 
                         onclick="window.open('${videoUrl}', '_blank')"
                         title="Klik untuk menonton ${song.title}">
                    </div>
                    <div class="p-6">
                        <span class="inline-block px-3 py-1 bg-blue-100 text-blue-700 text-xs font-bold rounded-full mb-2">${song.category}</span>
                        <h3 class="font-bold text-lg text-slate-900 mb-1">${song.title}</h3>
                        <p class="text-slate-500 text-sm">${song.artist}</p>
                        <button onclick="window.open('${videoUrl}', '_blank')" 
                                class="mt-3 w-full py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-2">
                            <i class="fab fa-youtube"></i> Tonton di YouTube
                        </button>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        function rotateWorshipSongs() {
            currentWorshipIndex = (currentWorshipIndex + 4) % worshipSongs.length;
            loadWorshipSongs();
        }

        // DUKUNGAN DOA FUNCTIONS
        function submitPrayer(e) {
            e.preventDefault();
            
            const name = document.getElementById('prayer-name').value;
            const contact = document.getElementById('prayer-contact').value;
            const category = document.getElementById('prayer-category').value;
            const request = document.getElementById('prayer-request').value;
            
            const message = `*Permohonan Doa*%0A%0A` +
                           `*Nama:* ${name}%0A` +
                           `*Kontak:* ${contact || '-'}%0A` +
                           `*Kategori:* ${category}%0A%0A` +
                           `*Permohonan Doa:*%0A${request}%0A%0A` +
                           `_Dikirim dari Renungan Embun Pagi_`;
            
            window.open(`https://wa.me/6281225047599?text=${message}`, '_blank');
            
            document.getElementById('prayer-form').classList.add('hidden');
            document.getElementById('prayer-success').classList.remove('hidden');
        }

        function resetPrayerForm() {
            document.getElementById('prayer-form').reset();
            document.getElementById('prayer-form').classList.remove('hidden');
            document.getElementById('prayer-success').classList.add('hidden');
        }

        // UTILITIES
        function showToast(message) {
            const toast = document.getElementById('toast');
            document.getElementById('toast-message').textContent = message;
            toast.classList.remove('translate-y-20', 'opacity-0');
            
            setTimeout(() => {
                toast.classList.add('translate-y-20', 'opacity-0');
            }, 3000);
        }
    </script>
</body>
</html>
